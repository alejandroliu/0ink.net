<!doctype html>
<html lang="">
<head>
	<meta charset="utf-8"/>
	<title>Mirroring a Gitorious repository to GitHub - 0ink.net</title>
	<meta name="author" content="Alejandro Liu">


	<meta name="description" content="There is nothing special with GitHub and Gitorious here. This technique would work exactly the same the other way around or with other servers. In a nutshell # Inital setup git clone --mirror git://gitorious.org/weasyprint/weasyprint.git weasyprint GIT_DIR=weasyprint git remote add github git@github.com:SimonSapin/WeasyPrint …">
	<meta name="int-title" content="Mirroring a Gitorious repository to GitHub">
	<meta name="tags" content="directory, git, github, remote, setup">
	<meta name="date" content="2013-05-27 00:00:00+02:00">
	<meta name="modified" content="2021-12-25 22:02:18+01:00">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link rel="stylesheet" href="/theme/css/main.css" type="text/css" />


    <link href="/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="0ink.net Atom Feed" />
    <link href="/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="0ink.net RSS Feed" />
</head>

<body>
    <div class="container">

	  <header role="banner">
	    <div class="feeds">
	        <a href="/feeds/atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed" title="atom feed"/></a>
	    </div>
		<nav class="pages">
			    <a href="/pages/about.html">About</a>
-			    <a href="/pages/privacy-policy.html">Privacy Policy</a>
		</nav>
		<a href="/" class="title"
 title="Not the site you are looking for..."		>
		0ink.net</a>
	      <div class="logo">
		<a href="/" class="title"
 title="Not the site you are looking for..."		>
		  <img src="/images/2021/0ink.png" width="44" height="44" />
		</a>
	      </div>



      </header>

	  <div class="wrapper">

		  <div role="main" class="content">
			<iframe src="https://duckduckgo.com/search.html?site=0ink.net&prefill=Search with DuckDuckGo" style="overflow:hidden;margin:5px;padding:0;width:408px;height:40px;" frameborder="0"></iframe>

	<article class="full">

		<h1>Mirroring a Gitorious repository to GitHub</h1>

<div class="metadata">
  <time datetime="2013-05-27T00:00:00+02:00" pubdate>Mon 27 May 2013</time>
    <address class="vcard author">
      by <a class="url fn" href="/author/alejandro-liu.html">Alejandro Liu</a>
    </address>
  <p>Updated: 2021-12-25 22:02:18+01:00</p>
  in <a href="/category/c2013.html">2013</a>
<p class="tags">tagged <a href="/tag/directory.html">directory</a>, <a href="/tag/git.html">git</a>, <a href="/tag/github.html">github</a>, <a href="/tag/remote.html">remote</a>, <a href="/tag/setup.html">setup</a></p></div>
		<p>There is nothing special with <a href="http://github.com/">GitHub</a> and
<a href="http://gitorious.com/">Gitorious</a> here. This technique would work
exactly the same the other way around or with other servers.</p>
<h2 id="in-a-nutshell">In a nutshell</h2>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">Inital</span><span class="w"> </span><span class="n">setup</span><span class="w"></span>
<span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="o">--</span><span class="n">mirror</span><span class="w"> </span><span class="nl">git</span><span class="p">:</span><span class="o">//</span><span class="n">gitorious</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">weasyprint</span><span class="o">/</span><span class="n">weasyprint</span><span class="p">.</span><span class="n">git</span><span class="w"> </span><span class="n">weasyprint</span><span class="w"></span>
<span class="n">GIT_DIR</span><span class="o">=</span><span class="n">weasyprint</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">github</span><span class="w"> </span><span class="n">git</span><span class="nv">@github</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="n">SimonSapin</span><span class="o">/</span><span class="n">WeasyPrint</span><span class="p">.</span><span class="n">git</span><span class="w"></span>

<span class="err">#</span><span class="w"> </span><span class="ow">In</span><span class="w"> </span><span class="n">cron</span><span class="w"></span>
<span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="k">path</span><span class="o">/</span><span class="k">to</span><span class="o">/</span><span class="n">project</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="k">fetch</span><span class="w"> </span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="c1">--mirror github</span>
</code></pre></div>

<h2 id="how-it-works">How it works</h2>
<p>Mirroring with Git is pretty easy: just pull from or push to another
repository. <a href="http://github.com/">GitHub</a> and
<a href="http://gitorious.com/">Gitorious</a> allow you to push to them or pull
from them, but you can not make them push to somewhere else. You need
something in the middle. Digging a bit in the man pages tells you that
the magic option is <code>--mirror</code>. First, clone your "source" repository:</p>
<div class="highlight"><pre><span></span><code>git clone --mirror git://gitorious.org/weasyprint/weasyprint.git weasyprint
</code></pre></div>

<p><code>--mirror</code> implies <code>--bare</code>. This repository is not for working, you
don't want it to have a working directory. More importantly, <code>--mirror</code>
sets up the origin remote so that git fetch will directly fetch into
local branches without doing any merge. It will force the update if
the remote history has diverged from the local one.</p>
<div class="highlight"><pre><span></span><code>git fetch
</code></pre></div>

<p>Now our local repository is an exact mirror of what we have on
<a href="http://gitorious.com/">Gitorious</a>. Let's push it to <a href="http://github.com/">GitHub</a>:</p>
<div class="highlight"><pre><span></span><code><span class="n">git</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="k">add</span><span class="w"> </span><span class="n">github</span><span class="w"> </span><span class="n">git</span><span class="nv">@github</span><span class="p">.</span><span class="nl">com</span><span class="p">:</span><span class="n">SimonSapin</span><span class="o">/</span><span class="n">WeasyPrint</span><span class="p">.</span><span class="n">git</span><span class="w"></span>
<span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="c1">--mirror github</span>
</code></pre></div>

<p>The <code>--mirror</code> option for git push is similar to that for git clone:
instead of pushing just a branch, it says that all references (branches,
tags, -) should be the same on the remote end as they are here, even if
it means forced updates or removing. Now our
<a href="http://gitorious.com/">GitHub</a> repository also is a mirror. Let's
update it every hour with cron. The <code>-q</code> option says to suppress normal
output but keep error messages, which cron should send you by email if
your server is properly configured.</p>
<div class="highlight"><pre><span></span><code><span class="mf">42</span><span class="w"> </span><span class="o">*</span><span class="w">    </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w">   </span><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="kr">to</span><span class="o">/</span><span class="n">weasyprint</span><span class="w"> </span><span class="err">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">fetch</span><span class="w"> </span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="err">&amp;&amp;</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="o">-</span><span class="n">q</span><span class="w"> </span><span class="o">--</span><span class="n">mirror</span><span class="w"> </span><span class="n">github</span><span class="w"></span>
</code></pre></div>

<h4 id="warning-mirror-is-like-force">Warning: <code>--mirror</code> is like <code>--force</code></h4>
<p>Both <code>--mirror</code> options are kind of like <code>--force</code> in that you can
lose data if you're not careful. It will make exact mirrors, no question
asked. If you push changes to the mirror's destination, they will be
overwritten/removed on the next update if they are not in the mirror's
source.</p>
<p>Original article by Simon Sapin: <a href="http://exyr.org/2011/git-mirrors/">http://exyr.org/2011/git-mirrors/</a></p>

	</article>


		  </div>

		  <div class="sidebar">

	        <nav>
	          <h2>Years</h2>
	          <ul>
	              <li ><a href="/category/c2021.html">2021</a></li>
	              <li ><a href="/category/c2020.html">2020</a></li>
	              <li ><a href="/category/c2019.html">2019</a></li>
	              <li ><a href="/category/c2018.html">2018</a></li>
	              <li ><a href="/category/c2017.html">2017</a></li>
	              <li ><a href="/category/c2016.html">2016</a></li>
	              <li ><a href="/category/c2015.html">2015</a></li>
	              <li ><a href="/category/c2014.html">2014</a></li>
	              <li class="active"><a href="/category/c2013.html">2013</a></li>
	              <li ><a href="/category/c.html">...</a></li>
	          </ul>
	        </nav>

	          <aside>
	          <h2>Social</h2>
			    <ul class="social">
				  <li><a href="https://github.com/alejandroliu/">github</a><i></i></li>
				  <li><a href="https://www.linkedin.com/in/alejandro-liu-ly/">LinkedIn</a><i></i></li>
			    </ul>
			  </aside>

	          <aside>
	            <h2>Links</h2>
	            <ul>
	                <li><a href="https://github.com/alejandroliu/0ink.net">Repo</a></li>
	                <li><a href="https://alejandro.iliu.net/">Alejandro</a></li>
	                <li><a href="/tags.html">Tags</a></li>
	                <li><a href="/sitemap.html">sitemap</a></li>
	            </ul>
	          </aside>
	      </div>

	  </div>

      <footer>

		<p role="contentinfo">
		  © 2021 Alejandro Liu - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey">pelican-simplegrey</a>.
		  <span class="feeds">
		    <a href="/feeds/rss.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="rss feed" title="rss feed"/></a>
		  </span>
		  </p>

	  </footer>

	</div>


</body>
</html>