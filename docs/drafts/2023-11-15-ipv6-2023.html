<!doctype html>
<html lang="">
<head>
	<meta charset="utf-8"/>
	<title>IPv6 on 2023 - 0ink.net</title>
	<meta name="author" content="Alejandro Liu">


	<meta name="description" content="This is a sequel to my article [[../2021/2021-12-21-ipv6-blues.md|IPv6 blues]]. Table of Contents Layout Enabling forwarding Configure networking Prefix delegation Router advertisement Conclusion At the time it looked that only /64 prefix address was being allocated. However, when I recently checked my ADSL modem router configuration I noticed …">
	<meta name="int-title" content="IPv6 on 2023">
	<meta name="tags" content="address, alpine, configuration, information, linux, network">
	<meta name="date" content="2023-11-15 00:00:00+01:00">
	<meta name="modified" content="2023-06-19 10:43:35.006069+02:00">


	<link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
	<link rel="stylesheet" href="/theme/css/main.css" type="text/css" />


    <link href="/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="0ink.net Atom Feed" />
    <link href="/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="0ink.net RSS Feed" />
</head>

<body>
    <div class="container">

	  <header role="banner">
	    <div class="feeds">
	        <a href="/feeds/atom.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="atom feed" title="atom feed"/></a>
	    </div>
		<nav class="pages">
			    <a href="/pages/about.html">About</a>
-			    <a href="/pages/privacy-policy.html">Privacy Policy</a>
		</nav>
		<a href="/" class="title"
 title="Not the site you are looking for..."		>
		0ink.net</a>
	      <div class="logo">
		<a href="/" class="title"
 title="Not the site you are looking for..."		>
		  <img src="/images/2021/0ink.png" width="44" height="44" />
		</a>
	      </div>



      </header>

	  <div class="wrapper">

		  <div role="main" class="content">
			<iframe src="https://duckduckgo.com/search.html?site=0ink.net&prefill=Search with DuckDuckGo" style="overflow:hidden;margin:5px;padding:0;width:408px;height:40px;" frameborder="0"></iframe>

	<article class="full">

		<h1>IPv6 on 2023</h1>

<div class="metadata">
  <time datetime="2023-11-15T00:00:00+01:00" pubdate>Wed 15 November 2023</time>
    <address class="vcard author">
      by <a class="url fn" href="/author/alejandro-liu.html">Alejandro Liu</a>
    </address>
  <p>Updated: 2023-06-19 10:43:35.006069+02:00</p>
  in <a href="/category/c2023.html">2023</a>
<p class="tags">tagged <a href="/tag/address.html">address</a>, <a href="/tag/alpine.html">alpine</a>, <a href="/tag/configuration.html">configuration</a>, <a href="/tag/information.html">information</a>, <a href="/tag/linux.html">linux</a>, <a href="/tag/network.html">network</a></p></div>
		<p>This is a sequel to my article [[../2021/2021-12-21-ipv6-blues.md|IPv6 blues]].</p>
<hr>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#layout">Layout</a></li>
<li><a href="#enabling-forwarding">Enabling forwarding</a></li>
<li><a href="#configure-networking">Configure networking</a></li>
<li><a href="#prefix-delegation">Prefix delegation</a></li>
<li><a href="#router-advertisement">Router advertisement</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
<hr>
<p>At the time it looked that only /64 prefix address was being allocated.
However, when I recently checked my ADSL modem router configuration I
noticed that actually the ADSL modem gets assigned /48 prefix.  Thids makes
the configuration <em>much</em> easier.</p>
<p>What is nice, is that for <strong>"reasonable"</strong> configurations, IPv6 usually does the
right thing and configures most things by itself.  For IPv6 routing, you only
need to enable the right functionality and most of the addressing is determined
automatically.</p>
<p>This article expands on this
<a href="https://wiki.alpinelinux.org/wiki/Linux_Router_with_VPN_on_a_Raspberry_Pi_(IPv6)">Alpine Linux Wiki article</a>.</p>
<h2 id="layout">Layout</h2>
<p>This is a very simple configuration.</p>
<p><svg xmlns="http://www.w3.org/2000/svg" width="440" height="96">    <style>        line, path, circle, rect, polygon{stroke:black;stroke-width:2;stroke-opacity:1;fill-opacity:1;stroke-linecap:round;stroke-linejoin:miter;}text{font-family:Iosevka Fixed, monospace;font-size:14px;}rect.backdrop{stroke:none;fill:white;}.broken{stroke-dasharray:8;}.filled{fill:black;}.bg_filled{fill:white;}.nofill{fill:white;}.end_marked_arrow{marker-end:url(#arrow);}.start_marked_arrow{marker-start:url(#arrow);}.end_marked_diamond{marker-end:url(#diamond);}.start_marked_diamond{marker-start:url(#diamond);}.end_marked_circle{marker-end:url(#circle);}.start_marked_circle{marker-start:url(#circle);}.end_marked_open_circle{marker-end:url(#open_circle);}.start_marked_open_circle{marker-start:url(#open_circle);}.end_marked_big_open_circle{marker-end:url(#big_open_circle);}.start_marked_big_open_circle{marker-start:url(#big_open_circle);}        <!--separator-->            </style>    <defs>        <marker id="arrow" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">            <polygon points="0,0 0,4 4,2 0,0"></polygon>        </marker>        <marker id="diamond" viewBox="-2 -2 8 8" refX="4" refY="2" markerWidth="7" markerHeight="7" orient="auto-start-reverse">            <polygon points="0,2 2,0 4,2 2,4 0,2"></polygon>        </marker>        <marker id="circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">            <circle cx="4" cy="4" r="2" class="filled"></circle>        </marker>        <marker id="open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">            <circle cx="4" cy="4" r="2" class="bg_filled"></circle>        </marker>        <marker id="big_open_circle" viewBox="0 0 8 8" refX="4" refY="4" markerWidth="7" markerHeight="7" orient="auto-start-reverse">            <circle cx="4" cy="4" r="3" class="bg_filled"></circle>        </marker>    </defs>    <rect class="backdrop" x="0" y="0" width="440" height="96"></rect>    <text x="146" y="44" >eth0</text>    <text x="10" y="60" >KPN</text>    <text x="42" y="60" >modem</text>    <text x="194" y="60" >router</text>    <text x="330" y="60" >HOME</text>    <text x="370" y="60" >NETWORK</text>    <text x="258" y="76" >eth1</text>    <g>        <line x1="4" y1="40" x2="84" y2="40" class="solid"></line>        <line x1="4" y1="40" x2="4" y2="72" class="solid"></line>        <line x1="84" y1="40" x2="84" y2="72" class="solid"></line>        <line x1="4" y1="72" x2="84" y2="72" class="solid"></line>        <line x1="188" y1="40" x2="244" y2="40" class="solid"></line>        <line x1="188" y1="40" x2="188" y2="72" class="solid"></line>        <line x1="244" y1="40" x2="244" y2="72" class="solid"></line>        <line x1="84" y1="56" x2="188" y2="56" class="solid"></line>        <line x1="188" y1="72" x2="244" y2="72" class="solid"></line>        <line x1="324" y1="40" x2="428" y2="40" class="solid"></line>        <line x1="324" y1="40" x2="324" y2="72" class="solid"></line>        <line x1="428" y1="40" x2="428" y2="72" class="solid"></line>        <line x1="244" y1="56" x2="324" y2="56" class="solid"></line>        <line x1="324" y1="72" x2="428" y2="72" class="solid"></line>    </g></svg></p>

<p>The current Alpine Linux kernel (v3.17.3) has IPv6 enabled by default, so nothing
special needs to be done for that.</p>
<h2 id="enabling-forwarding">Enabling forwarding</h2>
<p>By deault, IP (v4 or v6) forward is disabled on a Linux kernel.  To enable, you 
need to modify <code>syctl.conf</code>.  Create a file:</p>
<p><code>/etc/sysctl.d/router.conf</code></p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Controls</span><span class="w"> </span><span class="nx">IP</span><span class="w"> </span><span class="nx">packet</span><span class="w"> </span><span class="nx">forwarding</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv4</span><span class="p">.</span><span class="nx">ip_forward</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span>

<span class="err">#</span><span class="w"> </span><span class="nx">http</span><span class="p">:</span><span class="c1">//vk5tu.livejournal.com/37206.html</span>
<span class="err">#</span><span class="w"> </span><span class="nx">What</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">special</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="s">&quot;2&quot;</span><span class="p">?</span><span class="w"> </span><span class="nx">Originally</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">value</span><span class="w"> </span><span class="nx">was</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">but</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="nx">disabled</span><span class="w"> </span><span class="nx">autoconfiguration</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">interfaces</span><span class="p">.</span><span class="w"> </span><span class="nx">That</span><span class="w"> </span><span class="k">is</span><span class="p">,</span><span class="w"> </span><span class="nx">you</span><span class="w"> </span><span class="nx">couldn</span><span class="err">&#39;</span><span class="nx">t</span><span class="w"> </span><span class="nx">appear</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">some</span><span class="w"> </span><span class="nx">interfaces</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="nx">appear</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">be</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">other</span><span class="w"> </span>
<span class="err">#</span><span class="w"> </span><span class="nx">interfaces</span><span class="p">.</span><span class="w"> </span><span class="nx">But</span><span class="w"> </span><span class="nx">that</span><span class="err">&#39;</span><span class="nx">s</span><span class="w"> </span><span class="nx">exactly</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">mental</span><span class="w"> </span><span class="nx">model</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">ADSL</span><span class="w"> </span><span class="nx">router</span><span class="p">.</span><span class="w"> </span>

<span class="err">#</span><span class="w"> </span><span class="nx">Controls</span><span class="w"> </span><span class="nx">IP</span><span class="w"> </span><span class="nx">packet</span><span class="w"> </span><span class="nx">forwarding</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv6</span><span class="p">.</span><span class="nx">conf</span><span class="p">.</span><span class="nx">all</span><span class="p">.</span><span class="nx">forwarding</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv6</span><span class="p">.</span><span class="nx">conf</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">forwarding</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Accept</span><span class="w"> </span><span class="nx">Router</span><span class="w"> </span><span class="nx">Advertisments</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv6</span><span class="p">.</span><span class="nx">conf</span><span class="p">.</span><span class="nx">all</span><span class="p">.</span><span class="nx">accept_ra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv6</span><span class="p">.</span><span class="nx">conf</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">accept_ra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">2</span>

<span class="err">#</span><span class="w"> </span><span class="nx">We</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">router</span><span class="w"> </span><span class="nx">so</span><span class="w"> </span><span class="nx">disable</span><span class="w"> </span><span class="nx">temporary</span><span class="w"> </span><span class="nx">addresses</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv6</span><span class="p">.</span><span class="nx">conf</span><span class="p">.</span><span class="nx">all</span><span class="p">.</span><span class="nx">use_tempaddr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span>
<span class="nx">net</span><span class="p">.</span><span class="nx">ipv6</span><span class="p">.</span><span class="nx">conf</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">use_tempaddr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>

<h2 id="configure-networking">Configure networking</h2>
<p>Configure IPv6 address for <code>eth1</code>.  We don't need to configure <code>eth0</code> as that will be
done by <code>dhcpcd</code> through the ISP's router advertisements:</p>
<div class="highlight"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Conect</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">ISP</span>
<span class="kt">auto</span><span class="w"> </span><span class="nx">eth0</span>
<span class="nx">iface</span><span class="w"> </span><span class="nx">eth0</span><span class="w"> </span><span class="nx">inet</span><span class="w"> </span><span class="nx">static</span>
<span class="w">  </span><span class="nx">address</span><span class="w"> </span><span class="m m-Double">192.168.2.2</span><span class="mi">50</span>
<span class="w">  </span><span class="nx">netmask</span><span class="w"> </span><span class="m m-Double">255.255.255.0</span>
<span class="w">  </span><span class="nx">broadcast</span><span class="w"> </span><span class="m m-Double">192.168.2.2</span><span class="mi">55</span>

<span class="err">#</span><span class="w"> </span><span class="nx">Connected</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">local</span><span class="w"> </span><span class="nx">LAN</span>
<span class="kt">auto</span><span class="w"> </span><span class="nx">eth1</span>
<span class="nx">iface</span><span class="w"> </span><span class="nx">eth1</span><span class="w"> </span><span class="nx">inet</span><span class="w"> </span><span class="nx">static</span>
<span class="w">  </span><span class="nx">address</span><span class="w"> </span><span class="m m-Double">192.168.3.1</span>
<span class="w">  </span><span class="nx">netmask</span><span class="w"> </span><span class="m m-Double">255.255.255.0</span>
<span class="w">  </span><span class="nx">broadcast</span><span class="w"> </span><span class="m m-Double">192.168.3.2</span><span class="mi">55</span>

<span class="nx">iface</span><span class="w"> </span><span class="nx">eth1</span><span class="w"> </span><span class="nx">inet6</span><span class="w"> </span><span class="nx">static</span>
<span class="w">  </span><span class="nx">address</span><span class="w"> </span><span class="nx">fde4</span><span class="p">:</span><span class="mi">8</span><span class="nx">dba</span><span class="p">:</span><span class="mi">82</span><span class="nx">e1</span><span class="p">:</span><span class="nx">fff4</span><span class="o">::</span><span class="mi">1</span>
<span class="w">  </span><span class="nx">netmask</span><span class="w"> </span><span class="mi">64</span>
<span class="w">  </span><span class="nx">autoconf</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="nx">accept_ra</span><span class="w"> </span><span class="mi">0</span>
<span class="w">  </span><span class="nx">privext</span><span class="w"> </span><span class="mi">0</span>
</code></pre></div>

<h2 id="prefix-delegation">Prefix delegation</h2>
<p>The next step will be to configure DHCPv6 Prefix Delegation with your ISP.
Install <code>dhcpcd</code>.</p>
<div class="highlight"><pre><span></span><code>apk add dhcpcd
</code></pre></div>

<p>Configure it:</p>
<p><code>/etc/dhcpcd.conf</code></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Enable extra debugging</span>
<span class="c1">#debug</span>
<span class="c1">#logfile /var/log/dhcpcd.log</span>

<span class="c1"># Allow users of this group to interact with dhcpcd via the control</span>
<span class="c1"># socket.</span>
<span class="c1">#controlgroup wheel</span>

<span class="c1"># Inform the DHCP server of our hostname for DDNS.</span>
<span class="n">hostname</span><span class="w"> </span><span class="n">gateway</span>

<span class="c1"># Use the hardware address of the interface for the Client ID.</span>
<span class="c1">#clientid</span>
<span class="c1"># or</span>
<span class="c1"># Use the same DUID + IAID as set in DHCPv6 for DHCPv4 ClientID as</span>
<span class="c1"># per RFC4361. Some non-RFC compliant DHCP servers do not reply with</span>
<span class="c1"># this set. In this case, comment out duid and enable clientid above.</span>
<span class="n">duid</span>

<span class="c1"># Persist interface configuration when dhcpcd exits.</span>
<span class="n">persistent</span>

<span class="c1"># Rapid commit support.</span>
<span class="c1"># Safe to enable by default because it requires the equivalent option</span>
<span class="c1"># set on the server to actually work.</span>
<span class="n">option</span><span class="w"> </span><span class="n">rapid_commit</span>

<span class="c1"># A list of options to request from the DHCP server.</span>
<span class="n">option</span><span class="w"> </span><span class="n">domain_name_servers</span><span class="p">,</span><span class="w"> </span><span class="n">domain_name</span><span class="p">,</span><span class="w"> </span><span class="n">domain_search</span><span class="p">,</span><span class="w"> </span><span class="n">host_name</span>
<span class="n">option</span><span class="w"> </span><span class="n">classless_static_routes</span>

<span class="c1"># Most distributions have NTP support.</span>
<span class="n">option</span><span class="w"> </span><span class="n">ntp_servers</span>

<span class="c1"># Respect the network MTU.</span>
<span class="c1"># Some interface drivers reset when changing the MTU so disabled by</span>
<span class="c1"># default.</span>
<span class="c1">#option interface_mtu</span>

<span class="c1"># A ServerID is required by RFC2131.</span>
<span class="n">require</span><span class="w"> </span><span class="n">dhcp_server_identifier</span>

<span class="c1"># Generate Stable Private IPv6 Addresses instead of hardware based</span>
<span class="c1"># ones</span>
<span class="n">slaac</span><span class="w"> </span><span class="n">private</span>

<span class="c1"># A hook script is provided to lookup the hostname if not set by the</span>
<span class="c1"># DHCP server, but it should not be run by default.</span>
<span class="n">nohook</span><span class="w"> </span><span class="n">lookup</span><span class="o">-</span><span class="n">hostname</span>

<span class="c1"># IPv6 Only</span>
<span class="n">ipv6only</span>

<span class="c1"># Disable solicitations on all interfaces</span>
<span class="n">noipv6rs</span>

<span class="c1"># Wait for IP before forking to background</span>
<span class="n">waitip</span><span class="w"> </span><span class="mi">6</span>

<span class="c1"># Don&#39;t touch DNS</span>
<span class="n">nohook</span><span class="w"> </span><span class="n">resolv</span><span class="o">.</span><span class="n">conf</span>

<span class="c1"># Use the interface connected to WAN</span>
<span class="n">interface</span><span class="w"> </span><span class="n">eth0</span>
<span class="w">    </span><span class="n">ipv6rs</span><span class="w"> </span><span class="c1"># enable routing solicitation get the default IPv6 route</span>
<span class="w">    </span><span class="n">iaid</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">ia_pd</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="p">::</span><span class="o">/</span><span class="mi">56</span><span class="w"> </span><span class="n">eth1</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="mi">64</span>
</code></pre></div>

<p>Add dhcpcd to the default run level:</p>
<div class="highlight"><pre><span></span><code>rc-update add dhcpcd default
</code></pre></div>

<h2 id="router-advertisement">Router advertisement</h2>
<p>Now we need to configure <code>radvd</code> to give router advertisements to our internal
network for addressing and routing.</p>
<div class="highlight"><pre><span></span><code>apk add radvd
</code></pre></div>

<p>Once <code>radvd</code> is installed, you may configure it:</p>
<p><code>/etc/radvd.conf</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">interface</span><span class="w"> </span><span class="nx">eth0</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">We</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">sending</span><span class="w"> </span><span class="nx">advertisements</span><span class="w"> </span><span class="p">(</span><span class="nx">route</span><span class="p">)</span>
<span class="w">  </span><span class="nx">AdvSendAdvert</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>

<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">When</span><span class="w"> </span><span class="nx">set</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">administered</span><span class="w"> </span><span class="p">(</span><span class="nx">stateful</span><span class="p">)</span><span class="w"> </span><span class="nx">protocol</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">autoconfiguration</span><span class="p">.</span><span class="w"> </span><span class="nx">The</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">flag</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">described</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">RFC</span><span class="w"> </span><span class="mi">4862</span>
<span class="w">  </span><span class="nx">AdvManagedFlag</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>

<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">When</span><span class="w"> </span><span class="nx">set</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">administered</span><span class="w"> </span><span class="p">(</span><span class="nx">stateful</span><span class="p">)</span><span class="w"> </span><span class="nx">protocol</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">address</span><span class="w"> </span><span class="nx">autoconfiguration</span><span class="p">.</span><span class="w"> </span><span class="nx">For</span><span class="w"> </span><span class="nx">other</span><span class="w"> </span><span class="p">(</span><span class="nx">non</span><span class="o">-</span><span class="nx">address</span><span class="p">)</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">information</span><span class="p">.</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">The</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">of</span><span class="w"> </span><span class="nx">this</span><span class="w"> </span><span class="nx">flag</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">described</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nx">RFC</span><span class="w"> </span><span class="mi">4862</span>
<span class="w">  </span><span class="nx">AdvOtherConfigFlag</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>

<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">Suggested</span><span class="w"> </span><span class="nx">Maximum</span><span class="w"> </span><span class="nx">Transmission</span><span class="w"> </span><span class="nx">setting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">using</span><span class="w"> </span><span class="nx">the</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">Hurricane</span><span class="w"> </span><span class="nx">Electric</span><span class="w"> </span><span class="nx">Tunnel</span><span class="w"> </span><span class="nx">Broker</span><span class="p">.</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">AdvLinkMTU</span><span class="w"> </span><span class="mi">1480</span><span class="p">;</span>

<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">We</span><span class="w"> </span><span class="nx">have</span><span class="w"> </span><span class="nx">native</span><span class="w"> </span><span class="nx">Dual</span><span class="w"> </span><span class="nx">Stack</span><span class="w"> </span><span class="nx">IPv6</span><span class="w"> </span><span class="nx">so</span><span class="w"> </span><span class="nx">we</span><span class="w"> </span><span class="nx">can</span><span class="w"> </span><span class="nx">use</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">regular</span><span class="w"> </span><span class="nx">MTU</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">http</span><span class="p">:</span><span class="c1">//blogs.cisco.com/enterprise/ipv6-mtu-gotchas-and-other-icmp-issues</span>
<span class="w">  </span><span class="nx">AdvLinkMTU</span><span class="w"> </span><span class="mi">1500</span><span class="p">;</span>

<span class="w">  </span><span class="nx">prefix</span><span class="w"> </span><span class="o">::/</span><span class="mi">64</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">AdvOnLink</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>
<span class="w">    </span><span class="nx">AdvAutonomous</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="nx">SLAAC</span><span class="w"> </span><span class="nx">based</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">EUI</span>
<span class="w">    </span><span class="nx">AdvRouterAddr</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">};</span>

<span class="kd">interface</span><span class="w"> </span><span class="nx">eth1</span><span class="w"> </span><span class="p">{</span>

<span class="w">  </span><span class="nx">AdvSendAdvert</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>
<span class="w">  </span><span class="nx">AdvManagedFlag</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>
<span class="w">  </span><span class="nx">AdvOtherConfigFlag</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>
<span class="w">  </span><span class="nx">AdvLinkMTU</span><span class="w"> </span><span class="mi">1500</span><span class="p">;</span>

<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nx">Helps</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">route</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">lost</span><span class="w"> </span><span class="nx">when</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">WiFi</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">packet</span><span class="w"> </span><span class="nx">loss</span>
<span class="w">  </span><span class="nx">MaxRtrAdvInterval</span><span class="w"> </span><span class="mi">30</span><span class="p">;</span>
<span class="w">  </span><span class="nx">AdvDefaultLifetime</span><span class="w"> </span><span class="mi">9000</span><span class="p">;</span>

<span class="w">  </span><span class="nx">prefix</span><span class="w"> </span><span class="nx">fde4</span><span class="p">:</span><span class="mi">8</span><span class="nx">dba</span><span class="p">:</span><span class="mi">82</span><span class="nx">e1</span><span class="p">:</span><span class="nx">fff3</span><span class="o">::/</span><span class="mi">64</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">AdvOnLink</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span>
<span class="w">    </span><span class="nx">AdvAutonomous</span><span class="w"> </span><span class="nx">on</span><span class="p">;</span><span class="w"> </span><span class="err">##</span><span class="w"> </span><span class="nx">SLAAC</span><span class="w"> </span><span class="nx">based</span><span class="w"> </span><span class="nx">on</span><span class="w"> </span><span class="nx">EUI</span>
<span class="w">  </span><span class="p">};</span>
<span class="p">};</span>
</code></pre></div>

<p>Add <code>radvd</code> to the default run level:</p>
<div class="highlight"><pre><span></span><code>rc-update add radvd default
</code></pre></div>

<h2 id="conclusion">Conclusion</h2>
<p>At this point you should have a working IPv6 set-up.  Things that you may want to add:</p>
<ul>
<li>Firewall rules</li>
<li>Additional static routes and subnets</li>
<li>DHCP daemon configuration to have more control on IP address assignments</li>
<li>OpenVPN</li>
</ul>

	</article>


		  </div>

		  <div class="sidebar">

	        <nav>
	          <h2>Years</h2>
	          <ul>
	              <li class="active"><a href="/category/c2023.html">2023</a></li>
	              <li ><a href="/category/c2022.html">2022</a></li>
	              <li ><a href="/category/c2021.html">2021</a></li>
	              <li ><a href="/category/c2020.html">2020</a></li>
	              <li ><a href="/category/c2019.html">2019</a></li>
	              <li ><a href="/category/c2018.html">2018</a></li>
	              <li ><a href="/category/c2017.html">2017</a></li>
	              <li ><a href="/category/c2016.html">2016</a></li>
	              <li ><a href="/category/c2015.html">2015</a></li>
	              <li ><a href="/category/c2014.html">2014</a></li>
	              <li ><a href="/category/c2013.html">2013</a></li>
	          </ul>
	        </nav>

	          <aside>
	          <h2>Social</h2>
			    <ul class="social">
				  <li><a href="https://github.com/alejandroliu/">github</a><i></i></li>
				  <li><a href="https://www.linkedin.com/in/alejandro-liu-ly/">LinkedIn</a><i></i></li>
			    </ul>
			  </aside>

	          <aside>
	            <h2>Links</h2>
	            <ul>
	                <li><a href="/sitemap.html">sitemap</a></li>
	                <li><a href="/tags.html">Tags</a></li>
	                <li><a href="https://github.com/alejandroliu/0ink.net">Repo</a></li>
	                <li><a href="https://home.0ink.net/nanowiki/">Wiki</a></li>
	            </ul>
	          </aside>
	      </div>

	  </div>

      <footer>

		<p role="contentinfo">
		  © 2021-2022 Alejandro Liu - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-simplegrey">pelican-simplegrey</a>.
		  <span class="feeds">
		    <a href="/feeds/rss.xml" rel="alternate"><img src="/theme/images/icons/feed-32px.png" alt="rss feed" title="rss feed"/></a>
		  </span>
		  </p>

	  </footer>

	</div>


</body>
</html>